<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
broadcast chan create;
broadcast chan edit;
broadcast chan submit;
broadcast chan do_return;
broadcast chan withdraw;
broadcast chan accept;
broadcast chan accept_wait;
broadcast chan hide;
broadcast chan reject;
broadcast chan publish;
int publish_wait_time = 0;
</declaration><template><name x="8" y="8">stav_clanku</name><parameter>broadcast chan &amp;create, broadcast chan &amp;edit, broadcast chan &amp;submit, broadcast chan &amp;do_return, broadcast chan &amp;withdraw, broadcast chan &amp;accept, broadcast chan &amp;accept_wait, broadcast chan &amp;hide, broadcast chan &amp;reject, broadcast chan &amp;publish, int &amp;publish_wait_time</parameter><declaration>// Place local declarations here.
clock clk;</declaration><location id="id0" x="232" y="480"><name x="144" y="472">PUBLISHED</name></location><location id="id1" x="432" y="328"><name x="448" y="320">REJECTED</name></location><location id="id2" x="728" y="480"><name x="744" y="472">WAITING</name><label kind="invariant" x="704" y="496">clk&lt;=publish_wait_time</label></location><location id="id3" x="432" y="160"><name x="344" y="152">SUBMITTED</name></location><location id="id4" x="432" y="-64"><name x="376" y="-72">DRAFT</name></location><location id="id5" x="432" y="-168"><name x="408" y="-200">INITIAL</name></location><init ref="id5"/><transition><source ref="id1"/><target ref="id1"/><nail x="400" y="376"/><nail x="472" y="376"/></transition><transition><source ref="id0"/><target ref="id3"/><label kind="synchronisation" x="312" y="344">hide?</label></transition><transition><source ref="id2"/><target ref="id0"/><label kind="guard" x="420" y="450">clk==publish_wait_time</label><label kind="synchronisation" x="420" y="465">publish!</label><label kind="assignment" x="420" y="480">clk=0, publish_wait_time=0</label></transition><transition><source ref="id2"/><target ref="id3"/><label kind="synchronisation" x="680" y="296">hide?</label><label kind="assignment" x="648" y="272">publish_wait_time=0</label><nail x="712" y="328"/></transition><transition><source ref="id3"/><target ref="id2"/><label kind="synchronisation" x="592" y="368">accept_wait?</label><label kind="assignment" x="592" y="384">clk=0</label></transition><transition><source ref="id3"/><target ref="id1"/><label kind="synchronisation" x="416" y="240">reject?</label></transition><transition><source ref="id3"/><target ref="id0"/><label kind="synchronisation" x="224" y="264">accept?</label><nail x="288" y="264"/></transition><transition><source ref="id3"/><target ref="id3"/><label kind="synchronisation" x="576" y="136">edit?</label><nail x="576" y="112"/><nail x="576" y="192"/></transition><transition><source ref="id3"/><target ref="id4"/><label kind="synchronisation" x="488" y="40">withdraw?</label><nail x="496" y="88"/></transition><transition><source ref="id3"/><target ref="id4"/><label kind="synchronisation" x="392" y="64">do_return?</label></transition><transition><source ref="id4"/><target ref="id3"/><label kind="synchronisation" x="296" y="56">submit?</label><nail x="352" y="88"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="520" y="-72">edit?</label><nail x="520" y="-88"/><nail x="520" y="-48"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="376" y="-128">create?</label></transition></template><template><name>pisalek</name><parameter>broadcast chan &amp;create, broadcast chan &amp;edit, broadcast chan &amp;submit, broadcast chan &amp;do_return, broadcast chan &amp;withdraw, broadcast chan &amp;accept, broadcast chan &amp;accept_wait, broadcast chan &amp;hide, broadcast chan &amp;reject</parameter><declaration>clock clk;
const int MAX_WAIT = 10;
</declaration><location id="id6" x="-80" y="-168"><name x="-88" y="-200">REJECTED</name></location><location id="id7" x="-248" y="-88"><name x="-280" y="-64">MA_TO_VYDAVATEL</name></location><location id="id8" x="-248" y="-216"><name x="-232" y="-224">SUBMITTED</name><label kind="invariant" x="-136" y="-224">clk&lt;2*MAX_WAIT</label></location><location id="id9" x="-248" y="-448"><name x="-232" y="-456">DRAFT</name></location><location id="id10" x="-248" y="-608"></location><init ref="id10"/><transition><source ref="id8"/><target ref="id7"/><label kind="synchronisation" x="-392" y="-160">accept_wait?</label><nail x="-304" y="-136"/></transition><transition><source ref="id6"/><target ref="id6"/><nail x="-80" y="-120"/><nail x="-16" y="-128"/></transition><transition><source ref="id8"/><target ref="id6"/><label kind="synchronisation" x="-184" y="-192">reject?</label></transition><transition><source ref="id7"/><target ref="id8"/><label kind="synchronisation" x="-192" y="-136">hide?</label><label kind="assignment" x="-192" y="-120">clk=0</label><nail x="-192" y="-128"/></transition><transition><source ref="id8"/><target ref="id7"/><label kind="synchronisation" x="-280" y="-152">accept?</label></transition><transition><source ref="id8"/><target ref="id8"/><label kind="guard" x="-408" y="-240">clk&gt;MAX_WAIT</label><label kind="assignment" x="-392" y="-224">clk=0</label><nail x="-344" y="-248"/><nail x="-344" y="-184"/></transition><transition><source ref="id8"/><target ref="id9"/><label kind="synchronisation" x="-8" y="-352">do_return?</label><nail x="-8" y="-344"/></transition><transition><source ref="id8"/><target ref="id9"/><label kind="guard" x="-184" y="-360">clk&lt;MAX_WAIT</label><label kind="synchronisation" x="-184" y="-344">withdraw!</label><nail x="-184" y="-344"/></transition><transition><source ref="id9"/><target ref="id8"/><label kind="synchronisation" x="-304" y="-352">submit!</label><label kind="assignment" x="-288" y="-336">clk=0</label></transition><transition><source ref="id9"/><target ref="id9"/><label kind="synchronisation" x="-440" y="-440">edit!</label><nail x="-400" y="-448"/><nail x="-400" y="-408"/></transition><transition><source ref="id10"/><target ref="id9"/><label kind="synchronisation" x="-304" y="-560">create!</label></transition></template><template><name>vydavatel</name><parameter>broadcast chan &amp;submit, broadcast chan &amp;withdraw, broadcast chan &amp;edit, broadcast chan &amp;do_return, broadcast chan &amp;accept, broadcast chan &amp;accept_wait, broadcast chan &amp;hide, broadcast chan &amp;reject, broadcast chan &amp;publish, int &amp;publish_wait_time</parameter><declaration>clock clk;
const int MAX_WAIT = 10;
</declaration><location id="id11" x="48" y="144"><name x="64" y="128">WAITING</name><label kind="invariant" x="32" y="160">clk&lt;=MAX_WAIT</label></location><location id="id12" x="136" y="0"><name x="126" y="-30">REJECTED</name></location><location id="id13" x="-200" y="144"><name x="-296" y="120">PUBLISHED</name></location><location id="id14" x="-64" y="-200"><name x="-168" y="-200">SUBMITTED</name><label kind="invariant" x="-48" y="-208">clk&lt;MAX_WAIT</label></location><location id="id15" x="-64" y="-400"><name x="-96" y="-432">MA_TO_AUTOR</name></location><init ref="id15"/><transition><source ref="id12"/><target ref="id12"/><nail x="168" y="72"/><nail x="200" y="24"/></transition><transition><source ref="id11"/><target ref="id13"/><label kind="synchronisation" x="-96" y="144">publish?</label></transition><transition><source ref="id11"/><target ref="id14"/><label kind="synchronisation" x="32" y="-24">hide!</label><label kind="assignment" x="40" y="-8">clk = 0</label><nail x="56" y="48"/></transition><transition><source ref="id14"/><target ref="id11"/><label kind="select" x="64" y="88">i: int[1, MAX_WAIT]</label><label kind="synchronisation" x="-40" y="56">accept_wait!</label><label kind="assignment" x="-56" y="72">clk=0, publish_wait_time=i</label></transition><transition><source ref="id14"/><target ref="id12"/><label kind="synchronisation" x="56" y="-96">reject!</label></transition><transition><source ref="id13"/><target ref="id14"/><label kind="synchronisation" x="-104" y="24">hide!</label><label kind="assignment" x="-112" y="40">clk=0</label><nail x="-72" y="16"/></transition><transition><source ref="id14"/><target ref="id13"/><label kind="synchronisation" x="-216" y="40">accept!</label></transition><transition><source ref="id14"/><target ref="id15"/><label kind="synchronisation" x="96" y="-368">do_return!</label><nail x="120" y="-344"/></transition><transition><source ref="id14"/><target ref="id15"/><label kind="synchronisation" x="-24" y="-352">withdraw?</label><nail x="-24" y="-312"/></transition><transition><source ref="id14"/><target ref="id14"/><label kind="synchronisation" x="-256" y="-256">edit!</label><nail x="-216" y="-264"/><nail x="-216" y="-216"/></transition><transition><source ref="id15"/><target ref="id14"/><label kind="synchronisation" x="-124" y="-355">submit?</label><label kind="assignment" x="-120" y="-336">clk = 0</label></transition></template><system>// Place template instantiations here.
clanek = stav_clanku(create, edit, submit, do_return, withdraw, accept, accept_wait, hide, reject, publish, publish_wait_time);
autor = pisalek(create, edit, submit, do_return, withdraw, accept, accept_wait, hide, reject);
nakladatelstvi = vydavatel(submit, withdraw, edit, do_return, accept, accept_wait, hide, reject, publish, publish_wait_time);

// List one or more processes to be composed into a system.
system clanek, autor, nakladatelstvi;
</system></nta>